const init_grid=function(){$("#BOARD").on("dragover",".TARGET",dragover),$("#BOARD").on("dragstart",".TASK",dragstart),$("#BOARD").on("dragend",".TASK",dragend)},dragover=function(e){e.preventDefault();const t=e.target,n=document.querySelector("#BOARD div.DRAGGING"),r=insertAboveTask(t,e.clientY);n.classList.contains("TASK")&&t.classList.contains("TARGET")&&(n?t.insertBefore(n,r):t.appendChild(n))},dragstart=function(e){if(!e.target.classList.contains("TASK")){if(!e.target.parentElement.classList.contains("TASK"))return void e.preventDefault();e.target.parentElement.classList.add("DRAGGING")}e.target.classList.add("DRAGGING")},dragend=function(e){const t=document.querySelector("#BOARD div.DRAGGING");if(!t)return void e.preventDefault();t.classList.remove("DRAGGING");const n=e.target.parentElement.getAttribute("id"),r=e.target.parentElement.parentElement.getAttribute("id"),o=0===n.indexOf("TASK_")?r:n,s=t.getAttribute("id").replace("TASK_",""),a=o.replace("STATUS_","").split("_SWIMLANE_")[0],l=o.replace("STATUS_","").split("_SWIMLANE_")[1],c=document.getElementById(o).querySelectorAll(".TASK");var i=[];c.forEach((function(e){i.push(e.getAttribute("id").replace("TASK_",""))})),i=i.join(":"),console.group("TASK_MOVED"),console.log("TASK     :",s),console.log("TARGET   :",o,n,r),console.log("STATUS   :",a),console.log("SWIMLANE :",l),console.log("SORTED   :",i),console.groupEnd(),apex.server.process("UPDATE_TASK",{x01:s,x02:a,x03:l,x04:i},{dataType:"text",success:function(e){console.log("RESULT",e),e.indexOf("sqlerrm")>=0?apex.message.showErrors([{type:"error",location:["page","inline"],pageItem:"",message:e.split("sqlerrm:")[1],unsafe:!1}]):apex.message.showPageSuccess(e)}})},insertAboveTask=(e,t)=>{let n=null,r=Number.NEGATIVE_INFINITY;return e.querySelectorAll(".TASK:not(.DRAGGING)").forEach((e=>{const{top:o}=e.getBoundingClientRect(),s=t-o;s<0&&s>r&&(r=s,n=e)})),n};